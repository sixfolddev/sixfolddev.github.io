title Update Multiple Accounts
participant "RegistrationManager" as m
participant "UpdateMultipleAccountSqlService" as s
participant "UpdateAccountDAO" as d

m->d: UpdateAccountDAO updateDao = new UpdateAccountDAO(String connection)
d-->m: return instance 
m->s: UpdateMultipleAccountSqlService update = new UpdateMultipleAccountSqlService(List<User> newUsers, UpdateAccountSqlDAO updateDao)
s-->m: return instance
m->s: var result = IResult update.Update()
s->s: String message = \""
s->s: bool isSuccess = true
s->s: String query = $"UPDATE {ConfigurationManager.AppSettings["tableName"]\n

alt try
s->d: int rowsChanged= updateDao.Update(String query)
alt using(SqlCommand cmd = new SqlCommand(query, connection))
d->d:connection.Open()
d->d: int rowsChanged = cmd.ExecuteNonQuery()
end 
d-->s: return rowsChanged
alt if(rowsChanged == newUsers.size())
s->s: message = ConfigurationManager.AppSettings["SuccessMessage"]
else else 
s->s:message = ConfigurationManager.AppSettings["FailureMessage"] 
s->s: isSuccess = false
end

else catch(Exception e)
s->s: message = ConfigurationManager.AppSettings["ErrorMessage"]
s->s: isSuccess = false
end 
s-->m: return new CheckResult(message, isSuccess)
