title Normal User Registration - Hash Email

UI->Manager Layer: Register normal user account
Manager Layer->Service Layer: Hasher.GenerateHash(email)
note over Service Layer: Hash generated
Service Layer->Manager Layer: Return string hashedEmail
Manager Layer->Service Layer: CreateAccount(use)
note over Service Layer: Account created
Service Layer->Data Access Layer:User user
Data Access Layer->Datastore:Users.add(user)
Datastore->Data Access Layer:bool isSuccess = true
Data Access Layer->Service Layer:bool isSuccess = true
Service Layer->Manager Layer: bool IsSuccess = true
Manager Layer->Service Layer: UpdateAccount(hashedEmail,\nhashedPassword)
Service Layer->Data Access Layer: user.Update(hashedEmail,\nhashedPassword)
Data Access Layer-> Datastore: Users.update(user)
note over Datastore: Plaintext email is stored in\npseudo table with hash value;\nHash value is stored with other\naccount info.
Datastore->Manager Layer: Success
Manager Layer->Service Layer: Login(newUser)
note over Service Layer: User logged in
Service Layer->Manager Layer: Success
Manager Layer->UI: displayHomepage()


